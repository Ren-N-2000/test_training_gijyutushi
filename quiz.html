<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>技術士試験トレーニング</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 650px; margin: auto; }
    .choice { margin: 10px 0; }
    button { padding: 10px; width: 100%; margin-top: 5px; }
    .result { margin-top: 20px; font-weight: bold; }
    .next-btn, .mode-select { margin-top: 30px; text-align: center; }
    #explanation { margin-top: 10px; background: #f0f0f0; padding: 10px; display: none; }
  </style>
</head>
<body>
  <h1>技術士試験トレーニング</h1>

  <h2 id="question"></h2>
  <div id="choices"></div>
  <div class="result" id="result"></div>
  <button id="explainBtn" onclick="showExplanation()" style="display:none;">解説を見る</button>
  <div id="explanation"></div>
  <div class="next-btn">
    <button onclick="nextQuestion()">次の問題へ</button>
  </div>

<script>
  // モード取得（★最初に実行すること）
  function getModeFromURL() {
    const params = new URLSearchParams(window.location.search);
    return params.get('mode') || 'basic';
  }
  const mode = getModeFromURL();

  const questions = [];

  // 問題データ（6問だけ例示。以降自由に追加可）
  questions.push(
    {
      level: "basic",
      question: "鋼構造物の溶接継手の設計上の留意点に関する記述のうち、最も不適切なものはどれか？",
      choices: [
        "溶接箇所はできるだけ少なくし, 溶接量も必要最小限とする。",
        "衝撃や繰返し応力を受ける継手はできるだけ全断面溶込みループ (開先) 溶接にする。",
        "溶接継手の組立方法, 溶接順序を十分考慮し,できるだけ上向き溶接が可能な構造とする。",
        "連結部の構造はなるべく単純にし,応力の伝達を明確にする。 溶接の集中,交差は避け,必要に応じてスカラップ(切欠き)を設ける。",
        "構成する各材片においてなるべく偏心がないようにし,できるだけ板厚差の少ない組合せを考える。"
      ],
      answer: "溶接継手の組立方法, 溶接順序を十分考慮し,できるだけ上向き溶接が可能な構造とする。",
      explanation: "上向き溶接は施工性が悪く、ミスの原因となるため避けるべきです。"
    },
    {
      level: "basic",
      question: "鋼橋の維持管理に関する次の記述のうち、最も不適切なものはどれか？",
      choices: [
        "支承周りなどの滞水が生じやすい箇所では鋼材の腐食が進行しやすい。",
        "部材連結部においてF11T以外の高力ボルトが使われている場合, ボルトの遅れ破壊の危険性がある。",
        "構造物に自動車, 列車などの活荷重, 風などの外力が繰返し作用すると,溶接継手や溶接欠陥などの応力集中部に疲労き裂が発生することがある。",
        "塗装においては,鋼材表面さびを除去し, 付着している有害物質の除去と層間付着性を良くするための面粗しを行う。",
        "き裂の溶接補修においては, 再溶接による残留応力, ひずみの増加、新たな溶接欠陥の発生など損傷発生前の状態よりも疲労強度が劣る場合がある。"
      ],
      answer: "部材連結部においてF11T以外の高力ボルトが使われている場合, ボルトの遅れ破壊の危険性がある。",
      explanation: "F11Tも遅れ破壊の危険性があるため、記述が限定的すぎて不適切と判断されます。"
    },
  );
questions.push({
  level: "basic",
  question: "斜面安定，支持力及び基礎に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "直接基礎は、通常、構造物直下の地層の支持力が不足する場合や、沈下が過大になる場合に用いられる。",
    "簡便分割法やスウェーデン法で用いられる斜面の安全率は、すべり面に沿った土のせん断強さをすべり面に働くせん断力で割った値として定義される。",
    "地盤の許容支持力は、構造物の重要性、土質定数の精度や土の鋭敏性などを考慮して、極限支持力を適当な安全率で割って求められる。",
    "斜面の安全率の定義の1つは、ある点に関して、土のせん断強さによる抵抗モーメントを滑動モーメントで割った値として定義され、円弧すべり法はこの定義に基づいている。",
    "杭の負の摩擦力は、杭の周囲の地盤が沈下することにより杭周面に下向きに作用する摩擦力をいう。杭の負の摩擦力が働くと、杭材に大きな軸力が負荷されるとともに、杭先端地盤に大きな荷重が作用することとなる。"
  ],
  answer: "直接基礎は、通常、構造物直下の地層の支持力が不足する場合や、沈下が過大になる場合に用いられる。",
  explanation: "直接基礎は、**地盤が十分な支持力を有する**場合に適用され、支持力が不足する場合は杭基礎などが採用されます。したがって、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "締固めた土の性質に関する次の記述のうち、「締固めた土は一般的に、乾燥密度が高いほど強度が a、圧縮性が b、透水係数が c である。」に入る語句の組合せとして、最も適切なものはどれか。",
  choices: [
    "a：小さく、b：低く、c：大きい",
    "a：大きく、b：高く、c：小さい",
    "a：大きく、b：低く、c：大きい",
    "a：大きく、b：低く、c：小さい",
    "a：小さく、b：高く、c：大きい"
  ],
  answer: "a：大きく、b：低く、c：小さい",
  explanation: "乾燥密度が高い＝締固められている状態では、土粒子の接触が増え、せん断強度が大きくなり、圧縮性は小さく、透水性も低くなります。"
});

questions.push({
  level: "basic",
  question: "鋼構造物の疲労に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "疲労とは、時間的に変動する荷重が繰返し作用することによってき裂が発生・進展し、破壊につながる現象である。",
    "一定振幅の変動応力を繰返し受けるとき、疲労寿命の長短は応力の振幅に依存し、応力の平均値の影響は受けない。",
    "溶接残留応力が存在すると、外力によって生じる変動応力が圧縮であっても疲労き裂が発生することがある。",
    "溶接継手において疲労き裂の起点となるのは、溶接止端、溶接ルート、溶接欠陥である。",
    "溶接止端から発生する疲労き裂を対象とした疲労強度向上法として、グラインダー処理によって溶接止端形状を滑らかにする方法がある。"
  ],
  answer: "一定振幅の変動応力を繰返し受けるとき、疲労寿命の長短は応力の振幅に依存し、応力の平均値の影響は受けない。",
  explanation: "疲労寿命は主に応力振幅に依存しますが、平均応力（引張成分）の影響も受けるため、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "鋼材の腐食に関する次の記述の「腐食反応では a と b が必ず等量で進行し、片方の反応が抑制されれば自動的に他方の反応も抑制される。鉄が溶出する a が生じるためには水分と鉄の接触が必要であり、b の進行には c と d の存在が必要となる。e は、鋼材表面に緻密なさび層を形成させ、これが鋼材表面を保護することで鋼材の腐食による板厚減少を抑制するものである。」に入る語句の組合せとして、最も適切なものはどれか。",
  choices: [
    "a：アノード反応、b：カソード反応、c：水、d：酸素、e：耐候性鋼材",
    "a：アノード反応、b：カソード反応、c：水、d：塩水、e：金属溶射",
    "a：カソード反応、b：アノード反応、c：水、d：酸素、e：溶融亜鉛めっき",
    "a：カソード反応、b：アノード反応、c：水、d：素、e：耐候性鋼材",
    "a：カソード反応、b：アノード反応、c：水、d：酸素、e：金属溶射"
  ],
  answer: "a：アノード反応、b：カソード反応、c：水、d：酸素、e：耐候性鋼材",
  explanation: "腐食はアノード反応（鉄が溶出）とカソード反応（酸素などの還元）で同時に進行します。耐候性鋼材は安定したさび層により腐食を抑制します。"
});

questions.push({
  level: "basic",
  question: "道路橋の床版に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "床版は、自動車輪荷重を直接支えるものであるため、その耐久性は輪荷重の大きさと頻度、すなわち大型の自動車の走行台数の影響を大きく受ける。",
    "鋼床版とは、縦リブ・横リブでデッキプレートを補剛したものであり、鋼床版は縦桁、横桁等の床組構造または主桁で支持される。",
    "床版のコンクリートと鋼桁との合成作用を考慮する場合、床版のコンクリートには一般に桁作用としての応力と床版作用としての応力が同時に生じる。",
    "鋼コンクリート合成床版は、鋼板や形鋼等の鋼部材とコンクリートが一体となって荷重に抵抗するよう合成構造として設計される。",
    "床版の設計には L荷重 を用いる。このL荷重は、車両の隣り合う車軸を1組の集中荷重に置き換えたものである。"
  ],
  answer: "床版の設計には L荷重 を用いる。このL荷重は、車両の隣り合う車軸を1組の集中荷重に置き換えたものである。",
  explanation: "床版設計には通常、T荷重や輪荷重が用いられます。L荷重は主に橋全体の設計用で、床版単体の設計には用いません。"
});

questions.push({
  level: "basic",
  question: "コンクリートに関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "細骨材率を過度に小さくするとコンクリートが粗々しくなり、材料分離の傾向も高まり、ワーカビリティーが低下する。",
    "単位水量が多いコンクリートを使用すると、材料分離が生じにくくなり、均質で欠陥の少ないコンクリートを造りやすくなる。",
    "コンクリートの材料分離抵抗性を確保するためには、一定以上の単位セメント量あるいは単位粉体量が必要である。",
    "コンクリートの標準的な空気量は、練上がり時においてコンクリート体積の4～7%程度とするのが一般的である。",
    "コンクリートは、運搬、打込み、締固め、仕上げ等に適するワーカビリティーを有している必要がある。"
  ],
  answer: "単位水量が多いコンクリートを使用すると、材料分離が生じにくくなり、均質で欠陥の少ないコンクリートを造りやすくなる。",
  explanation: "単位水量が多いと材料分離しやすくなり、強度低下や品質不良の原因となるため、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "プレストレストコンクリートに関する次の記述のうち、最も適切なものはどれか。",
  choices: [
    "プレストレストコンクリートは、コンクリート部材におけるひび割れ性能の改善には有利であるが、部材断面の縮小には不利な構造である。",
    "ポストテンション方式とは、緊張材に引張力を与えておいてコンクリートを打ち込み、コンクリート硬化後に緊張材に与えておいた引張力を緊張材とコンクリートとの付着によりコンクリートに伝えてプレストレスを与える方法である。",
    "プレテンション方式とは、コンクリートの硬化後、緊張材に引張力を与えて、その端部をコンクリートに定着させてプレストレスを与える方法である。",
    "プレストレストコンクリート構造物の維持管理においては、鉄筋コンクリート構造物に対して行う内容に加えて、プレストレストコンクリートに関する特有の事項、特にPC鋼材の腐食には留意することが必要である。",
    "プレストレス力の算出において、コンクリートの弾性変形の影響は考慮する必要がない。"
  ],
  answer: "プレストレストコンクリート構造物の維持管理においては、鉄筋コンクリート構造物に対して行う内容に加えて、プレストレストコンクリートに関する特有の事項、特にPC鋼材の腐食には留意することが必要である。",
  explanation: "PC鋼材の腐食はプレストレストコンクリート特有の問題であり、維持管理上で特に留意すべき事項の一つです。"
});

questions.push({
  level: "basic",
  question: "コンクリート構造物の劣化現象に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "アルカリシリカ反応とは、骨材中に含まれる反応性を有するシリカ鉱物等がコンクリート中のアルカリ性水溶液と反応して、コンクリートに異常膨張やひび割れを発生させる劣化現象をいう。",
    "道路橋の鉄筋コンクリート床版の疲労とは、輪荷重の繰返し作用により床版にひび割れや陥没を生じる現象をいう。",
    "塩害とは、コンクリート中の鋼材の腐食が塩化物イオンにより促進され、コンクリートのひび割れや剥離、鋼材の断面減少を引き起こす劣化現象をいう。",
    "中性化と水分浸透による鋼材腐食とは、酸性物質や硫酸イオンとの接触によりコンクリート硬化体が分解したり、化合物生成時の膨張圧によってコンクリートのひび割れや剥離を引き起こしたりする劣化現象をいう。",
    "凍害とは、コンクリート中の水分が凍結融解を繰り返すことによって、コンクリート表面からスケーリング、微細ひび割れ及びポップアウトが発生する現象をいう。"
  ],
  answer: "中性化と水分浸透による鋼材腐食とは、酸性物質や硫酸イオンとの接触によりコンクリート硬化体が分解したり、化合物生成時の膨張圧によってコンクリートのひび割れや剥離を引き起こしたりする劣化現象をいう。",
  explanation: "中性化による鋼材腐食は炭酸ガスの影響でpHが低下することによるものです。酸性物質や硫酸イオンとの接触によるものは「化学的侵食（化学的劣化）」であり、この記述は中性化の説明として不適切です。"
});

questions.push({
  level: "basic",
  question: "幹線交通網評価に用いる4段階推定法に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "交通手段別分担交通量の推定に用いられる集計ロジットモデルは、パラメータ推定が容易であり、推計分担率が必ず0と1の間におさまる利点がある。",
    "分布交通量の推定に用いられるフレーター法は、現在パターン法の1つである。",
    "ゾーン別発生量、集中量の推定には、原単位法、クロス分類法、重回帰モデル法が使われている。",
    "配分交通量の推定に用いられる最適配分には、利用者最適（等時間配分）とシステム最適（総走行時間最小）がある。",
    "分析単位となるゾーンは、調査圏域と周辺地域を分割して設定され、発生・集中量の大きい都市圏中心部では大きなゾーン区分になるのに対し、都市圏周辺部では細かなゾーン区分となるのが通例である。"
  ],
  answer: "分析単位となるゾーンは、調査圏域と周辺地域を分割して設定され、発生・集中量の大きい都市圏中心部では大きなゾーン区分になるのに対し、都市圏周辺部では細かなゾーン区分となるのが通例である。",
  explanation: "発生・集中量の大きい都市中心部では交通特性の変化が大きいため、通常は**細かなゾーンに分けて分析**します。この記述は逆であるため不適切です。"
});

questions.push({
  level: "basic",
  question: "都市再生や公共空間活用に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "都市再生特別措置法が施行され、民間の活力を中心とした都市再生や官民の公共公益施設整備などによる都市再生の取組が推進されるようになった。",
    "リノベーションは、中心市街地にある歴史的建築物などの遊休不動産を活用し、都市の再活性化を図る取組のうち、建築物の用途変更を含むものをいう。",
    "エリアマネジメントは、地域の良好な環境や価値を維持・向上させるため、住民・事業主・地権者等が主体となって、清掃、維持管理、防犯・防災、イベントの運営などに取組むことをいう。",
    "官民一体の協働プロジェクトとしてはじめられたミズベリングは、水辺を「つくる」だけでなく水辺やその周辺地域を「つかいこなす」ことに重点を置いている。",
    "2020年に道路法が改正され、歩行者利便増進道路制度が創設されたことによって、道路がにぎわい創出のための滞留空間としても捉えられるようになった。"
  ],
  answer: "リノベーションは、中心市街地にある歴史的建築物などの遊休不動産を活用し、都市の再活性化を図る取組のうち、建築物の用途変更を含むものをいう。",
  explanation: "リノベーションは既存建物の改修や機能向上を指し、**必ずしも用途変更を含むわけではありません**。用途変更を含むものは「コンバージョン」とも呼ばれるため、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "河川の流出解析に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "流出解析の目的は、洪水や渇水を予測すること、流域環境や気候の変化に伴う水循環の変化を予測することにある。",
    "全降雨のうち、対象とする流出成分となる分を有効降雨といい、ならない分を損失降雨という。",
    "洪水時のピーク流量を推定するために使われる合理式は、雨水から流量への時間的な変換過程を表現するもので、大河川流域での河川計画でよく用いられる。",
    "流域をひと塊にとらえる集中型流出モデルの代表的なものとして、タンクモデルや貯留関数モデルなどがある。",
    "分布型流出モデルは、流出現象の空間的な分布を考えるモデルである。"
  ],
  answer: "洪水時のピーク流量を推定するために使われる合理式は、雨水から流量への時間的な変換過程を表現するもので、大河川流域での河川計画でよく用いられる。",
  explanation: "合理式は**小流域（数km²程度）**での設計に適しており、**大河川流域の計画には不適**です。そのため、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "開水路の流れに関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "同じ流量の流れでは、常流の水深は限界水深より大きい。",
    "射流では、フルード数は1より大きい。",
    "射流では、水路勾配は限界勾配より大きい。",
    "常流から射流に接続する場合、限界水深を通って水面は滑らかに接続する。",
    "マニングの流速公式によると、断面平均流速は粗度係数に比例する。"
  ],
  answer: "マニングの流速公式によると、断面平均流速は粗度係数に比例する。",
  explanation: "マニング公式では流速は粗度係数（n）に**反比例**します。粗度が大きいと流速は遅くなるため、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "河川堤防に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "河川堤防の高さは、河道計画において設定される計画高水位に、河川管理施設等構造令で定めた値を加えたもの以上とする。",
    "堤体への浸透水を速やかに排水することを目的としたドレーン工法のドレーン材料には、透水係数の小さい材料を選定する必要がある。",
    "河川堤防の浸透対策である表のり面被覆工法は、河川水の堤防への浸透を抑制することにより、洪水末期の水位急低下時の表のりすべり破壊の防止にも有効である。",
    "河川堤防の浸透破壊には、大きく分けてすべり破壊とパイピング破壊がある。",
    "盛土による河川堤防ののり勾配は、堤防の高さと堤内地盤高との差が0.6メートル未満である区間を除き、50パーセント以下とするものとする。"
  ],
  answer: "堤体への浸透水を速やかに排水することを目的としたドレーン工法のドレーン材料には、透水係数の小さい材料を選定する必要がある。",
  explanation: "排水のためのドレーン材料には**透水係数の大きい材料**を選ぶ必要があります。透水性が低いと水が抜けず、機能しません。"
});

questions.push({
  level: "basic",
  question: "河川計画に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "河川整備基本方針においては、全国的なバランスを考慮し、また個々の河川や流域の特性、地域住民のニーズなどを踏まえて、水系ごとの長期的な河川の整備の方針や整備の基本となるべき事項を定めなければならない。",
    "洪水防御に関する計画の策定に当たっては、河川の持つ治水、水、環境等の諸機能を総合的に検討するとともに、この計画がその河川に起こり得る最大洪水を目標に定めるものではないことに留意する。",
    "河川整備基本方針において計画の規模を決定するに当たっては、河川の重要度を重視するとともに、既往洪水による被害の実態、経済効果等を総合的に考慮して定めることを基本とする。",
    "正常流量とは、維持流量及び水利流量の双方を満足する流量であって、適正な河川管理のために基準となる地点において定めるものをいう。",
    "河川環境の整備と保全に関する基本的な事項は、動植物の良好な生息・生育・繁殖環境の保全創出、良好な景観の保全創出、人と河川との豊かな触れ合い活動の場の保全・創出、良好な水質の保全について、総合的に考慮して定めるものとする。"
  ],
  answer: "河川整備基本方針においては、全国的なバランスを考慮し、また個々の河川や流域の特性、地域住民のニーズなどを踏まえて、水系ごとの長期的な河川の整備の方針や整備の基本となるべき事項を定めなければならない。",
  explanation: "河川整備基本方針は『指定区間ごとに』策定されるため、『水系ごと』という表現は不適切です。"
});

questions.push({
  level: "basic",
  question: "海岸工学に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "微小振幅波理論によると、深海波では周期が2倍になると波速は2倍になるため、波長も2倍になる。",
    "微小振幅波理論によると、長波では水深が浅くなると波速は小さくなり、水深が1/16になると波速は1/4になる。",
    "グリーンの法則によると、水深が浅くなるにつれて津波の高さは高くなり、水深が1/16になると津波の高さは2倍になる。",
    "ハドソン式によると、波高が大きくなると傾斜堤における安定な被覆材の最小重量は大きくなり、波高が2倍になると安定な被覆材の最小重量は8倍になる。",
    "吹寄せによる海面上昇量は、風速が大きくなると大きくなり、風速が2倍になると4倍になる。"
  ],
  answer: "微小振幅波理論によると、深海波では周期が2倍になると波速は2倍になるため、波長も2倍になる。",
  explanation: "微小振幅波理論において、深海波の波速は周期に**比例しない**（波速は周期の平方根に比例）。したがって波長も2倍にはなりません。この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "海岸事業における養浜工に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "静的養浜は、砂浜のない、あるいは狭い海岸において実施されることが多く、養浜砂の流出を防止するために付帯施設を伴うのが一般的である。",
    "静的養浜工の断面諸元は、対象海域に年数回程度来襲する高波浪に対して設計することを基本とする。",
    "サンドバイパスやサンドリサイクルは静的養浜工に含まれる。",
    "動的養浜は、基本的に付帯施設を必要としないことから、近自然的な海岸の維持・保全に優れており、隣接海岸に対しての影響を和らげることができる。",
    "漂砂源からの供給土砂の減少に伴う侵食が生じている海浜に動的養浜工を適用する場合には、養浜砂の投入位置は漂砂源若しくはその近隣が基本となる。"
  ],
  answer: "サンドバイパスやサンドリサイクルは静的養浜工に含まれる。",
  explanation: "サンドバイパスやサンドリサイクルは、**養浜工の分類上「動的養浜」**に該当します。したがって、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "空港に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "滑走路の長さは、航空機の離陸距離、加速停止距離及び着陸距離を求め、そのいずれに対しても十分な長さを確保する必要がある。",
    "滑走路の長さを検討するに当たり考慮すべき条件には、気温、標高、滑走路の縦断勾配が含まれる。",
    "着陸帯の果たす役割の1つとして、航空機が滑走路から逸脱した場合でも人命の安全を図り、航空機の損傷を軽微にすることが挙げられる。",
    "ローディングエプロンは、旅客、手荷物及び貨物の積卸し並びに航空機燃料、食料、水等の補給を行うため、通常、ターミナルビルに隣接して配置される。",
    "平行誘導路は、滑走路と平行に設けられる誘導路であり、主として離着陸回数の少ない空港に設置される。"
  ],
  answer: "平行誘導路は、滑走路と平行に設けられる誘導路であり、主として離着陸回数の少ない空港に設置される。",
  explanation: "平行誘導路は、**離着陸回数が多い空港における効率化や安全性確保のために整備されるもの**であり、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "砂防施設に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "砂防ダムは、渓床勾配を緩和して縦横侵食を防止する機能や、渓床を高めて両岸の山脚を固定し山腹を安定させるなどの機能をもっている。",
    "砂防ダムを越流する水流は、ほぼダム軸に直角に落下するので、ダム軸はダムの水通し中心点において下流の流心線に直角とする。",
    "砂防ダムの水通しは、貯砂・調節効果とダム下流の洗掘を防止する観点からできるだけ狭くし、越流水深を大きくする。",
    "流路工は、床固め工と護岸工を組み合せて流路を整備するもので、流路勾配を緩和して縦横侵食を防止するなどの目的で実施される。",
    "山腹工は、法切り工、土留め工、排水工等で力学的に斜面を安定させる山腹基礎工と、斜面の侵食を将来にわたって保全する山腹緑化工に大別される。"
  ],
  answer: "砂防ダムの水通しは、貯砂・調節効果とダム下流の洗掘を防止する観点からできるだけ狭くし、越流水深を大きくする。",
  explanation: "砂防ダムの水通し部は、**過剰な洗掘やダム本体の損傷を防ぐため、できるだけ広く設けて越流水深を浅くするのが基本**であり、この記述は逆で不適切です。"
});

questions.push({
  level: "basic",
  question: "国内の再生可能エネルギーに関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "中小水力発電は様々な規模があり、河川の流水を利用する以外にも、農業用水や上下水道を利用する場合もあるが、大規模水力と同様に開発可能な地点は少ない。",
    "固定価格買取制度の開始により導入が急拡大した太陽光発電は、技術開発や量産効果により導入コストは低減しているが、パネルや周辺機器等についてはさらなるコスト低減が必要とされている。",
    "我が国は地熱資源量を豊富に保有しており、ベースロード電源として地熱発電への期待は大きいが、地熱資源が賦存する地域は、温泉施設がある地域と重なる場合が多いため、地元関係者との共生が必要である。",
    "風力発電は、スケールメリットが得られやすく大規模、大量導入に適しており、今後の再生可能エネルギーの量的拡大のカギを握っている。特に、洋上風力発電は今後の量的拡大に不可欠な発電方式である。",
    "未活用の廃棄物を燃料とするバイオマス発電は、廃棄物の再利用や減少につながり、循環型社会構築に大きく寄与するが、熱利用効率は低い。"
  ],
  answer: "中小水力発電は様々な規模があり、河川の流水を利用する以外にも、農業用水や上下水道を利用する場合もあるが、大規模水力と同様に開発可能な地点は少ない。",
  explanation: "中小水力発電は、大規模水力とは異なり、**まだ多くの開発可能地点が存在する再生可能エネルギー**です。そのためこの記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "火力発電所の冷却水取放水に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "深層取水設備の設置により得られる利点の1つとして、夏季に低温の深層水を取水することによる、プラントの熱効率の向上が期待できることが挙げられる。",
    "外海に面した海域では、深層取水方式の設備を用いることによって、取水路内への波浪の侵入を低減でき、冷却水ポンプの安定した運転が保たれる。",
    "表層放水方式による温排水の拡散面積は、放水される流量と比例する傾向にある。",
    "表層放水方式は、放水口の開口幅を狭くすることにより放水口出口の流速を低減することが可能であり、船舶の航行が多い地点で一般的に用いられている。",
    "水中放水方式による温排水の拡散面積は、表層放水方式によるものと比べて小さく放水量だけに依存しない。"
  ],
  answer: "表層放水方式は、放水口の開口幅を狭くすることにより放水口出口の流速を低減することが可能であり、船舶の航行が多い地点で一般的に用いられている。",
  explanation: "放水口の開口幅を狭くすると流速は**増加**するため、この記述は誤りです。船舶の安全性の観点からも流速の制御が重要です。"
});

questions.push({
  level: "basic",
  question: "舗装の性能指標に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "塑性変形輪数とは、49kNの輪荷重を繰り返し加えた場合に、舗装路面が下方に1mm変位するまでに要する回数で表す。",
    "浸透水量とは、直径15cmの円形の舗装路面下に15秒間に浸透する水の量で表す。",
    "疲労破壊輪数とは、舗装路面に49kNの輪荷重を繰り返し加えた場合に、舗装にひび割れが生じるまでに要する回数で表す。",
    "性能指標の値は、原則として施工直後の値を定めるものである。",
    "平たん性とは、車道延長1.5mにつき1箇所以上選定された任意の地点において、舗装路面と想定平たん舗装路面との高低差を測定し、その高低差の平均値で表す。"
  ],
  answer: "平たん性とは、車道延長1.5mにつき1箇所以上選定された任意の地点において、舗装路面と想定平たん舗装路面との高低差を測定し、その高低差の平均値で表す。",
  explanation: "平たん性は**路面の凹凸の連続性を示す指標**であり、一定区間における平均高低差ではなく、たとえばプロファイルメータなどによって測定されたIRIなどで評価されます。この記述は不正確です。"
});

questions.push({
  level: "basic",
  question: "鉄道の軌道変位に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "スラブ軌道では、繰り返し列車の荷重を受けることで沈下や移動により軌道変位が発生する。",
    "左右レール相互の軌道変位には、上下方向の水準変位、左右方向の軌間変位がある。",
    "軌間変位は、直接列車脱線につながるので、特に大きな変位がある場合は早急に整備する必要がある。",
    "1本のレール上での軌道変位には、上下方向の高低変位、レール直角方向の通り変位がある。",
    "平面性変位は、軌道の一定距離間隔における水準変位の差をいい、軌道の平面に対するねじれを示す。"
  ],
  answer: "スラブ軌道では、繰り返し列車の荷重を受けることで沈下や移動により軌道変位が発生する。",
  explanation: "スラブ軌道は、**バラスト軌道に比べて沈下や移動が少なく、軌道変位が生じにくい**構造です。この記述はバラスト軌道の特徴を混同しており不適切です。"
});

questions.push({
  level: "basic",
  question: "シールドトンネルに関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "シールド工法は、一般的には、非常に軟弱な沖積層から、洪積層や、新第三紀の軟岩までの地盤に適用され、地質の変化への対応は比較的容易である。また、硬岩に対する事例もある。",
    "シールドトンネルの断面形状としては円形断面を用いるのが一般的であり、その理由の1つに、セグメントがローリングしても断面利用上支障が少ないことが挙げられる。また、施工途中での外径の変更も容易である。",
    "シールドトンネルの線形は、使用目的、使用する設計条件、シールドの掘進等の面からできるだけ直線とし、曲線とする場合でも曲線半径の大きな線形が望ましい。",
    "シールド形式の選定に当たって最も留意すべき点は、切羽の安定が図れる形式を選定することである。また、安全性や経済性、用地、立坑の周辺環境、施工性等についても十分に検討しなければならない。",
    "シールド工法は、トンネル工法の中では周辺に及ぼす影響が比較的少ないが、特に発進基地周辺では立坑構築、シールド掘進時のクレーン、泥土又は泥水処理設備等から発生する騒音や振動により、周辺に影響を及ぼすことがある。"
  ],
  answer: "シールドトンネルの断面形状としては円形断面を用いるのが一般的であり、その理由の1つに、セグメントがローリングしても断面利用上支障が少ないことが挙げられる。また、施工途中での外径の変更も容易である。",
  explanation: "円形断面はローリングに強いなどの利点がありますが、**施工途中で外径を変更するのは非常に困難**です。よって「施工途中での外径の変更も容易」という記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "開削工事における土留め工に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "自立式土留め工は、比較的良質な地盤で浅い掘削工事に適する。",
    "切ばり式土留め工は、現場の状況に応じて支保工の数、配置等の変更が可能であるが、機械掘削や躯体構築時等に支保工が障害となりやすい。",
    "グラウンドアンカー式土留め工は、偏土圧が作用する場合や掘削面積が広い場合には適さない。",
    "控え杭タイロッド式土留め工は、土留め壁周辺に控え杭やタイロッドを設置するための用地が必要となる。",
    "補強土式土留め工は、グラウンドアンカー式に比較して施工本数は多くなるものの、アンカー長は短いため土留め周辺の用地に関する問題は比較的少ない。"
  ],
  answer: "グラウンドアンカー式土留め工は、偏土圧が作用する場合や掘削面積が広い場合には適さない。",
  explanation: "グラウンドアンカー式は、**掘削面積が広くても対応可能で、偏土圧にも有効**であることが多く、この記述は不適切です。"
});

questions.push({
  level: "basic",
  question: "工程管理に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "横線式工程表は、横軸に日数をとるので各作業の所要日数がわかり、さらに、作業の流れが左から右へ移行しているので作業間の関連がわかるが、工期に影響する作業がどれであるかがつかみにくい欠点がある。",
    "作業可能日数は、暦日日数から定休日のほかに、降水日数、積雪日数、日照時間などを考慮して割り出した作業不能日数を差し引いて求める。",
    "ネットワーク式工程表では、数多い作業の中でどの作業が全体の工程を最も強く支配し、時間的に余裕のない経路（critical path）であるかを確認することができない。",
    "工程と原価との関係は、工程速度を上げるとともに原価が安くなっていくが、さらに工程速度を上げると原価は上昇傾向に転じる。",
    "CPM法は、時間と費用との関連に着目し、工事費用が最小となるようネットワーク上で工期を短縮し、最適工期、最適費用を設定していく計画手法である。"
  ],
  answer: "ネットワーク式工程表では、数多い作業の中でどの作業が全体の工程を最も強く支配し、時間的に余裕のない経路（critical path）であるかを確認することができない。",
  explanation: "ネットワーク式工程表の最大の特徴は、クリティカルパス（最も工程を支配する経路）を明確に把握できることです。この記述はその特徴を否定しており不適切です。"
});

questions.push({
  level: "basic",
  question: "環境影響評価法に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "我が国では、1993年（平成5年）に制定された「環境基本法」において、環境アセスメントの推進が位置付けられたことをきっかけに、1997年（平成9年）に「環境影響評価法」が成立した。",
    "配慮書とは、事業の早期段階における環境配慮を可能にするため、事業の位置、規模等の検討段階において、環境保全のために適正な配慮をしなければならない事項について検討を行い、その結果をまとめた図書である。",
    "環境アセスメントの対象となる事業のうち、規模が大きく環境に大きな影響を及ぼすおそれがある事業を「第1種事業」として定め、環境アセスメントの手続きを必ず行うこととしている。",
    "第2種事業については、環境アセスメントを行うかどうかを事業の免許等を行う者等が判定基準にしたがって個別に判定するが、判定に当たっては、地域の状況をよく知っている都道府県知事の意見を聴くことになっている。",
    "評価書とは、事業者が環境アセスメントにおいて、どのような項目について、どのような方法で調査・予測・評価するか、その計画を示したものであり、1ヵ月間縦覧しなければならない。"
  ],
  answer: "評価書とは、事業者が環境アセスメントにおいて、どのような項目について、どのような方法で調査・予測・評価するか、その計画を示したものであり、1ヵ月間縦覧しなければならない。",
  explanation: "この記述は「方法書」の説明と混同しています。「評価書」とは調査・予測・評価の結果とその対応策を示したものであり、内容が不適切です。"
});

questions.push({
  level: "basic",
  question: "我が国の近年の建設環境に関する次の記述のうち、最も不適切なものはどれか。",
  choices: [
    "「生物多様性国家戦略2023-2030」では、2030年までに「ネイチャーポジティブ：自然再興」を実現することが、達成すべき短期目標（2030年ミッション）として掲げられている。",
    "「水質汚濁防止法」では、水質の汚濁に係わる環境上の条件について、人の健康を保護し、及び生活環境を保全する上で維持されることが望ましい基準を定めるものとしている。",
    "東京湾、伊勢湾、大阪湾を含む瀬戸内海等の閉鎖性海域では、陸域からの汚濁負荷量は減少しているものの、干潟・藻場の消失による海域の浄化能力の低下等により、依然として赤潮や青潮が発生し漁業被害等が生じている。",
    "循環型社会の形成のためには、再生品などの供給面の取組に加え、需要面からの取組が重要であるとの観点から、循環型社会形成推進基本法の個別法の1つとして「国等による環境物品等の調達の推進等に関する法律」が制定された。",
    "建設リサイクルの取組により建設廃棄物全体の再資源化・縮減率は1995年以降、徐々に向上しているが、品目別に見れば、建設混合廃棄物の最終処分率が依然として高い。"
  ],
  answer: "「水質汚濁防止法」では、水質の汚濁に係わる環境上の条件について、人の健康を保護し、及び生活環境を保全する上で維持されることが望ましい基準を定めるものとしている。",
  explanation: "「水質汚濁防止法」では、人の健康保護に関する項目には**排水基準を超えてはならない**という強制力のある基準が定められており、生活環境項目に対しては環境基準が設定されています。本記述は曖昧で実際の法的枠組みにそぐわないため不適切です。"
});




  let currentIndex = 0;

  function shuffle(array) {
    return array
      .map(value => ({ value, sort: Math.random() }))
      .sort((a, b) => a.sort - b.sort)
      .map(({ value }) => value);
  }

  function applyAdvancedMode(originalChoices, correctAnswer) {
    const modifiedChoices = [];
    const replacements = [
      ["上向き", "下向き"],
      ["必要最小限", "必要以上"],
      ["除去", "残存"],
      ["良くする", "悪くする"],
      ["避け", "集中し"],
      ["少ない", "多い"],
      ["明確に", "不明確に"],
      ["可能", "困難"]
    ];
    let newCorrect = correctAnswer;
    if (Math.random() < 0.5) {
      for (const [from, to] of replacements) {
        if (correctAnswer.includes(from)) {
          newCorrect = correctAnswer.replace(from, to);
          break;
        }
      }
    }
    for (let choice of originalChoices) {
      if (choice === correctAnswer) {
        modifiedChoices.push(newCorrect);
      } else if (Math.random() < 0.3) {
        modifiedChoices.push(correctAnswer);
      } else {
        modifiedChoices.push(choice);
      }
    }
    return { choices: modifiedChoices, answer: newCorrect };
  }

  function showQuestion() {
    const filtered = questions.filter(q => q.level === mode);
    const q = filtered[currentIndex % filtered.length];
    const questionElem = document.getElementById('question');
    const choicesElem = document.getElementById('choices');
    const resultElem = document.getElementById('result');
    const explainBtn = document.getElementById('explainBtn');
    const explanation = document.getElementById('explanation');

    resultElem.textContent = '';
    explanation.style.display = "none";
    explanation.textContent = '';
    explainBtn.style.display = "none";
    choicesElem.innerHTML = '';

    questionElem.textContent = "Q. " + q.question;

    let finalChoices = [...q.choices];
    let correct = q.answer;

    if (mode === "advanced") {
      const result = applyAdvancedMode(finalChoices, correct);
      finalChoices = result.choices;
      correct = result.answer;
    }

    const shuffled = shuffle(finalChoices);

    shuffled.forEach(choice => {
      const btn = document.createElement('button');
      btn.textContent = choice;
      btn.className = 'choice';
      btn.onclick = () => {
        resultElem.textContent = (choice === correct)
          ? "✅ 正解！"
          : "❌ 不正解。正解は「" + correct + "」";
        resultElem.style.color = (choice === correct) ? "green" : "red";
        explainBtn.style.display = "inline-block";
      };
      choicesElem.appendChild(btn);
    });
  }

function nextQuestion() {
  const filtered = questions.filter(q => q.level === mode);
  currentIndex = Math.floor(Math.random() * filtered.length);
  showQuestion();
}


  function showExplanation() {
    const filtered = questions.filter(q => q.level === mode);
    const q = filtered[currentIndex % filtered.length];
    const explanation = document.getElementById('explanation');
    explanation.style.display = "block";
    explanation.textContent = "🧠 ChatGPT解説: " + q.explanation;
  }

  // 初回表示
  showQuestion();
</script>
</body>
</html>